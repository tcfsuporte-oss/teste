<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>WebGL Chaos Mode üî•</title>
<style>
body {
    margin: 0;
    background: black;
    overflow: hidden;
    font-family: monospace;
}
#stats {
    position: fixed;
    top: 10px;
    left: 10px;
    color: #00ffcc;
    background: rgba(0,0,0,0.7);
    padding: 10px;
    border: 1px solid #00ffcc;
}
canvas {
    display: block;
}
</style>
</head>
<body>

<div id="stats">
FPS: <span id="fps">0</span><br>
Mem√≥ria: <span id="mem">0</span> MB<br>
Part√≠culas: <span id="count">0</span>
</div>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let particles = [];

let ball = {
    x: canvas.width / 2,
    y: canvas.height / 2,
    radius: 10,
    speed: 5,
    dx: 5,
    dy: 5
};

function randomDirection(speed) {
    let angle = Math.random() * Math.PI * 2;
    return {
        dx: Math.cos(angle) * speed,
        dy: Math.sin(angle) * speed
    };
}

function createExplosion(x, y) {
    for (let i = 0; i < 3000; i++) { // pesado üòà
        particles.push({
            x: x,
            y: y,
            dx: (Math.random() - 0.5) * 8,
            dy: (Math.random() - 0.5) * 8,
            life: 200,
            size: Math.random() * 3,
            hue: Math.random() * 360
        });
    }
}

let lastTime = performance.now();

function update() {

    // FPS
    let now = performance.now();
    let fps = Math.round(1000 / (now - lastTime));
    lastTime = now;
    document.getElementById("fps").innerText = fps;

    // Mem√≥ria (Chrome)
    if (performance.memory) {
        let mem = performance.memory.usedJSHeapSize / 1048576;
        document.getElementById("mem").innerText = mem.toFixed(2);
    } else {
        document.getElementById("mem").innerText = "N/A";
    }

    // Fundo com fade (rastro neon)
    ctx.fillStyle = "rgba(0,0,0,0.15)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ball.x += ball.dx;
    ball.y += ball.dy;

    let collided = false;

    if (ball.x <= 0 || ball.x >= canvas.width) collided = true;
    if (ball.y <= 0 || ball.y >= canvas.height) collided = true;

    if (collided) {
        ball.speed += 0.7;
        let dir = randomDirection(ball.speed);
        ball.dx = dir.dx;
        ball.dy = dir.dy;
        createExplosion(ball.x, ball.y);
    }

    // desenhar bola neon
    ctx.beginPath();
    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
    ctx.fillStyle = `hsl(${Date.now()/5 % 360},100%,50%)`;
    ctx.shadowBlur = 40;
    ctx.shadowColor = ctx.fillStyle;
    ctx.fill();
    ctx.shadowBlur = 0;

    // part√≠culas
    for (let i = 0; i < particles.length; i++) {
        let p = particles[i];
        p.x += p.dx;
        p.y += p.dy;
        p.life--;

        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        ctx.fillStyle = `hsl(${p.hue},100%,50%)`;
        ctx.fill();
    }

    particles = particles.filter(p => p.life > 0);

    document.getElementById("count").innerText = particles.length;

    requestAnimationFrame(update);
}

update();
</script>

</body>
</html>
